{"version":3,"sources":["webpack:///./src/search/getAlgoliaClient.js","webpack:///./src/pageComponents/indexPage/AppListing.jsx","webpack:///./src/pageComponents/indexPage/Featured.jsx","webpack:///./src/pageComponents/indexPage/Filtering.jsx","webpack:///./src/pageComponents/indexPage/PageParagraph.jsx","webpack:///./src/pageComponents/indexPage/indexPage.jsx"],"names":["getAlgoliaClient","algoliasearch","process","AppListing","handleChange","ev","_this$props","_this","props","onChange","textSearch","target","type","value","console","warn","renderEntry","appInfo","react_default","a","createElement","components","Object","assign","key","name","noIconTriplet","render","_this$props2","this","apps","className","placeholder","defaultValue","xlinkHref","map","React","Component","propTypes","PropTypes","arrayOf","object","isRequired","bool","func","string","Featured","shape","title","description","active","installed","Filtering","checkedObj","renderTopic","_ref","id","defaultChecked","htmlFor","renderGroup","_ref2","groupTitle","groupList","Fragment","invisible","topicList","objectOf","PageParagraph","text","index","initIndex","indexPage","_React$Component","call","state","hitList","search","searchRequestTime","searchClient","getListing","length","filteredAppIdList","getDpapp","dpapp2appInfo","Error","dpapp","dpappPerId","_ref$dpapp","url","topics","packageInfo","_ref$childrenFile","childrenFile","defaultIconFileList","filter","data","pageContext","log","page","assertThisInitialized_default","tabName","dpAppList","allDpApp","nodes","_ref3","indexOf","_ref4","dpappPerName","forEach","dpappNode","keys","lenght","featuredAppList","featuredApp","componentDidMount","_this2","getSearchTextFromHash","location","setHash","hash","then","query","_callee","_ref5","m","_this3","regenerator_default","wrap","_context","prev","next","match","_wrapRegExp","replace","decodeURIComponent","groups","Promise","resolve","setState","stop","_callee2","_ref6","tags","time","result","hits","_this4","_context2","tag","Date","now","hitsPerPage","analytics","attributesToRetrieve","attributesToSnippet","getRankingInfo","facets","tagFilters","sent","_ref7","error","_this5","_this$props$pageConte","paragraphTitle","paragraphText","containerComponents","keywords","basePath","activeTab","tabList","indexTabList","style","justifyContent","PageParagraph_PageParagraph","Featured_Featured","Filtering_Filtering","_ref8","AppListing_AppListing","_ref9","any"],"mappings":"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","file":"component---src-page-components-index-page-index-page-jsx-c63865765696aa6ade21.js","sourcesContent":["import algoliasearch from \"algoliasearch/lite\"\n\nconst getAlgoliaClient = () =>\n  algoliasearch(process.env.ALGOLIA_APP_ID, process.env.ALGOLIA_API_KEY)\n\nexport { getAlgoliaClient }\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport { AppEntry } from \"../../components\"\n\n\nclass AppListing extends React.Component {\n  static propTypes = {\n    apps: PropTypes.arrayOf(PropTypes.object).isRequired,\n    noIconTriplet: PropTypes.bool.isRequired,\n    onChange: PropTypes.func.isRequired,\n    textSearch: PropTypes.string.isRequired,\n  }\n\n  handleChange = (ev) => {\n    let { onChange, textSearch } = this.props\n    if (ev.target.type === \"search\") {\n      textSearch = ev.target.value\n    } else {\n      console.warn(\n        \"[AppSearchForm] Unhandled form target type:\",\n        ev.target.type\n      )\n    }\n    onChange({ textSearch })\n  }\n\n  renderEntry = (appInfo) => {\n    return <AppEntry\n      {...appInfo}\n      key={appInfo.name}\n      noIconTriplet={this.props.noIconTriplet}\n    />\n  }\n\n  render() {\n    const { apps, textSearch } = this.props\n    return <div className=\"cell large-8\">\n      <form className=\"apps-search\" onChange={this.handleChange}>\n        <input type=\"search\" placeholder=\"Search\" defaultValue={textSearch} />\n        <svg className=\"svg-ico\"><use xlinkHref=\"#icon-find\" /></svg>\n      </form>\n      <div className=\"featured-apps-list\">\n        {apps.map(this.renderEntry)}\n      </div>\n    </div>\n  }\n}\n\nexport { AppListing }\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport {\n  TopAppEntry,\n} from \"../../components\"\n\nclass Featured extends React.Component {\n  static propTypes = {\n    apps: PropTypes.arrayOf(PropTypes.shape({\n      name: PropTypes.string.isRequired,\n      title: PropTypes.string.isRequired,\n      description: PropTypes.string.isRequired,\n      active: PropTypes.bool.isRequired,\n      installed: PropTypes.bool.isRequired,\n    })).isRequired,\n    noIconTriplet: PropTypes.bool.isRequired,\n  }\n\n  render() {\n    const { apps } = this.props\n    return <div className=\"cell large-8\">\n      <div className=\"grid-x grid-margin-x featured-apps fusion-title-apps\">\n        <div className=\"cell large-10 m-0\">\n          <h4 className=\"title-apps\">Featured Apps</h4>\n        </div>\n        {apps.map((appInfo) => (\n          <TopAppEntry\n            {...appInfo}\n            key={appInfo.name}\n            noIconTriplet={this.props.noIconTriplet}\n          />))}\n      </div>\n    </div>\n  }\n}\n\nexport { Featured }\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nclass Filtering extends React.Component {\n  static propTypes = {\n    checkedObj: PropTypes.objectOf(PropTypes.bool).isRequired,\n    invisible: PropTypes.bool.isRequired,\n    onChange: PropTypes.func.isRequired,\n    topicList: PropTypes.arrayOf(PropTypes.shape({\n      groupTitle: PropTypes.string.isRequired,\n      groupList: PropTypes.arrayOf(PropTypes.shape({\n        name: PropTypes.string.isRequired,\n      })).isRequired,\n    })).isRequired,\n  }\n\n  handleChange = (ev) => {\n    const { onChange, checkedObj } = this.props\n    if (ev.target.type === \"checkbox\") {\n      checkedObj[ev.target.name] = !checkedObj[ev.target.name]\n    } else {\n      console.warn(\n        \"[AppSearchForm] Unhandled form target type:\",\n        ev.target.type\n      )\n    }\n    onChange({ checkedObj })\n  }\n\n  renderTopic = ({ name, title }) => {\n    const { checkedObj } = this.props\n    return <li key={name} className=\"dp-CustomCheckbox\">\n      <input\n        type=\"checkbox\"\n        id={`checkbox-${name}`}\n        name={name}\n        defaultChecked={checkedObj[name] || false}\n      />\n      <label htmlFor={`checkbox-${name}`}>\n        <svg className=\"svg-ico\"><use xlinkHref={`#icon-${name}`} /></svg>\n        {title}\n      </label>\n    </li>\n  }\n\n  renderGroup = ({ groupTitle, groupList }) => {\n    return <React.Fragment key={groupTitle}>\n      <h4 className=\"filter-title\">{groupTitle}</h4>\n      <ul className=\"filter-list\">\n        {groupList.map(this.renderTopic)}\n      </ul>\n    </React.Fragment>\n  }\n\n  render() {\n    const { invisible, topicList } = this.props\n    return <div className=\"cell large-2\" onChange={this.handleChange}>\n      {\n        invisible ? null :\n        <div className=\"apps-filters\">\n          {topicList.map(this.renderGroup)}\n        </div>\n      }\n    </div>\n  }\n}\n\nexport { Filtering }\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nclass PageParagraph extends React.Component {\n  static propTypes = {\n    title: PropTypes.string.isRequired,\n    text: PropTypes.string.isRequired,\n  }\n\n  render() {\n    const { title, text } = this.props\n\n    return <div className=\"cell large-2\">\n      <div className=\"details-panel\">\n        <h4 className=\"title-apps\">{title}</h4>\n        <p className=\"paragraph_small\">\n          {text}\n        </p>\n      </div>\n    </div>\n  }\n}\n\nexport { PageParagraph }\n","/* eslint-disable no-restricted-globals */\nimport React from \"react\"\nimport PropTypes from \"prop-types\"\nimport { graphql } from \"gatsby\"\n\nimport \"./indexPage.css\"\n\nimport {\n  featuredApp,\n  indexTabList,\n  topicList,\n} from \"../../misc\"\n\nimport {\n  SEO,\n  TabBar,\n} from \"../../components\"\n\nimport { getAlgoliaClient } from \"../../search/getAlgoliaClient\"\n\nimport {\n  InnerContainer,\n  IntermediateContainer,\n  OuterContainer,\n} from \"../../containerComponents\"\n\nimport { AppListing } from \"./AppListing\"\nimport { Featured } from \"./Featured\"\nimport { Filtering } from \"./Filtering\"\n\nimport { PageParagraph } from \"./PageParagraph\"\n\n\nconst searchClient = getAlgoliaClient()\nconst index = searchClient.initIndex(\"dev_DAM\")\n\n\nclass indexPage extends React.Component {\n  static propTypes = {\n    data: PropTypes.shape({\n      allDpApp: PropTypes.any,\n    }).isRequired,\n    pageContext: PropTypes.shape({\n      tabName: PropTypes.string.isRequired,\n      paragraphTitle: PropTypes.string.isRequired,\n      paragraphText: PropTypes.string.isRequired,\n    }).isRequired,\n  }\n\n  state = {\n    hitList: [],\n    search: {\n      textSearch: \"\",\n      checkedObj: {},\n    },\n  }\n\n  searchRequestTime = 0\n\n  searchClient = getAlgoliaClient()\n\n  constructor(props) {\n    super(props)\n\n    // console.log //\n    const { data, pageContext } = props\n    console.log({ page: this, pageContext, data })\n\n    // this.tabName //\n    const { tabName } = pageContext\n    this.tabName = tabName\n\n    // this.state... //\n    this.state.search.checkedObj[tabName] = true\n\n    // this.filteredAppIdList //\n    const { allDpApp: { nodes: dpAppList } } = data\n    this.filteredAppIdList = dpAppList\n      .filter(({ dpapp: { topics } }) => topics.indexOf(this.tabName) !== -1)\n      .map(({ dpapp: { id } }) => id)\n\n    // this.dpappPerId this.dpappPerName//\n    this.dpappPerId = {}\n    this.dpappPerName = {}\n    dpAppList.forEach((dpappNode) => {\n      this.dpappPerId[dpappNode.dpapp.id] = dpappNode\n      this.dpappPerName[dpappNode.dpapp.name] = dpappNode\n    })\n    if (Object.keys(this.dpappPerId).lenght !== dpAppList.lenght) {\n      throw new Error(\"dpappPerId has too few keys. Overlapping ids?\")\n    }\n\n    // this.featured //\n    this.featuredAppList = (featuredApp[this.tabName] || []).map((name) => {\n      return this.dpapp2appInfo(this.dpappPerName[name])\n    })\n  }\n\n  componentDidMount() {\n    this.getSearchTextFromHash({\n      location,\n      setHash: (hash) => { location.hash = hash },\n    }).then(() => {\n      this.query(this.state.search)\n    })\n  }\n\n  async getSearchTextFromHash({ location, setHash }) {\n    const m = location.hash.match(/[?&]search=(?<text>[^&]*)/)\n    if (m) {\n      // Remove the search from the fragment query\n      setHash(\n        location.hash\n          .replace(/search=[^&]*(&|$)/g, \"\")\n          .replace(/\\?$/, \"\")\n      )\n\n      const { search } = this.state\n      if (!search.textSearch) {\n        const textSearch = decodeURIComponent(m.groups.text)\n        await new Promise((resolve) => this.setState({\n          search: { ...search, textSearch },\n        }, resolve))\n      }\n    }\n  }\n\n  getListing = () => {\n    const list = this.state.search.textSearch || this.state.hitList.length ?\n      this.state.hitList :\n      this.filteredAppIdList\n\n    const listing = list\n      .map(this.getDpapp)\n      .map(this.dpapp2appInfo)\n    return listing\n  }\n\n  getDpapp = (id) => {\n    if (!id) throw new Error(\"Missing argument id\")\n    const dpapp = this.dpappPerId[id]\n    if (!dpapp) throw new Error(`getDpapp didn't find dpapp with id '${id}'`)\n    return dpapp\n  }\n\n  dpapp2appInfo = ({\n    dpapp: {\n      id,\n      name,\n      url,\n      topics,\n      title,\n      packageInfo: { description },\n    },\n    childrenFile = [],\n  }) => {\n    const fileList = childrenFile.filter(({ name: n }) => n === \"defaultIcon\")\n    return {\n      id,\n      name,\n      title,\n      description,\n      url,\n      topics,\n      defaultIconFileList: fileList,\n      active: false,\n      installed: false,\n    }\n  }\n\n  async query({ textSearch, checkedObj }) {\n    const tags = Object.keys(checkedObj).filter((tag) => checkedObj[tag])\n    const time = Date.now()\n    const result = await index.search(textSearch, {\n      hitsPerPage: 10,\n      page: 0,\n      analytics: false,\n      attributesToRetrieve: \"id\",\n      attributesToSnippet: \"*:20\",\n      getRankingInfo: true,\n      facets: \"*,\",\n      tagFilters: tags,\n    })\n    if (time >= this.searchRequestTime) {\n      const { hits } = result\n      if (hits) {\n        console.log({ hits })\n        const hitList = hits.map(({ id }) => {\n          if (id in this.dpappPerId) {\n            return id\n          }\n          console.error(id, \"-- This dpapp id obtained from Algolia was\",\n            \"filtered out because it couldn't be found in this.dpappPerId[].\",\n            \"You may need to run `gatsby build` to update the Algolia index\")\n          return null\n        }).filter((id) => id)\n\n        this.setState({ hitList }, () => { this.searchRequestTime = time })\n      } else {\n        console.warn(\"search returned no hitList:\", result)\n      }\n    }\n  }\n\n  render() {\n    const {\n      tabName,\n      paragraphTitle,\n      paragraphText,\n    } = this.props.pageContext\n\n    const noIconTriplet = this.tabName !== \"fusion\"\n\n    return <OuterContainer className=\"page-apps\">\n      <SEO\n        title=\"Apps & Integrations\"\n        keywords={[\"gatsby\", \"application\", \"react\"]}\n      />\n      <IntermediateContainer>\n        <TabBar\n          basePath=\"\"\n          activeTab={tabName}\n          tabList={indexTabList}\n          style={{\n            justifyContent: \"flex-start\",\n          }}\n        />\n        <InnerContainer>\n          <PageParagraph\n            title={paragraphTitle}\n            text={paragraphText}\n          />\n          <Featured\n            apps={this.featuredAppList}\n            noIconTriplet={noIconTriplet}\n          />\n          <Filtering\n            invisible={this.tabName !== \"fusion\"}\n            topicList={topicList}\n            checkedObj={this.state.search.checkedObj}\n            onChange={({ checkedObj }) => {\n              if (!checkedObj) throw new Error(checkedObj)\n              // eslint-disable-next-line react/no-access-state-in-setstate\n              const search = { ...this.state.search, checkedObj }\n              this.setState({ search })\n              this.query(search)\n            }}\n          />\n          <AppListing\n            apps={this.getListing()}\n            textSearch={this.state.search.textSearch}\n            noIconTriplet={noIconTriplet}\n            onChange={({ textSearch }) => {\n              // eslint-disable-next-line react/no-access-state-in-setstate\n              const search = { ...this.state.search, textSearch }\n              this.setState({ search })\n              this.query(search)\n            }}\n          />\n        </InnerContainer>\n      </IntermediateContainer>\n    </OuterContainer>\n  }\n}\n\nexport default indexPage\n\nexport const query = graphql`\n  query {\n    allDpApp {\n      nodes {\n        dpapp {\n          id\n          name\n          url\n          title\n          topics\n          packageInfo {\n            description\n          }\n        }\n        childrenFile {\n          name\n          publicURL\n          internal: childLoadNodeContent {\n            content\n          }\n          childImageSharp {\n            fluid {\n              ...GatsbyImageSharpFluid\n              src\n            }\n            original {\n              width\n              height\n            }\n          }\n        }\n      }\n    }\n  }\n`\n"],"sourceRoot":""}